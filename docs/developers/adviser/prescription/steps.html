
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Step prescription pipeline unit &#8212; Thoth Adviser 0.56.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="/assets/adviser/pygments.css" />
    <link rel="stylesheet" type="text/css" href="/assets/adviser/nameko.css" />
    <script data-url_root="../" id="documentation_options" src="/assets/adviser/documentation_options.js"></script>
    <script src="/assets/adviser/jquery.js"></script>
    <script src="/assets/adviser/underscore.js"></script>
    <script src="/assets/adviser/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Stride prescription pipeline unit" href="strides.html" />
    <link rel="prev" title="Sieve prescription pipeline unit" href="sieves.html" />

   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Lora:400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-123174547-2']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="strides.html" title="Stride prescription pipeline unit"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sieves.html" title="Sieve prescription pipeline unit"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Thoth Adviser 0.56.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Step prescription pipeline unit</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="step-prescription-pipeline-unit">
<span id="prescription-steps"></span><h1>Step prescription pipeline unit<a class="headerlink" href="#step-prescription-pipeline-unit" title="Permalink to this headline">¶</a></h1>
<p>Declaring <a class="reference internal" href="../steps.html#steps"><span class="std std-ref">pipeline units of type step</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pipeline unit is registered based on <code class="docutils literal notranslate"><span class="pre">should_include</span></code>
directive - <a class="reference internal" href="should_include.html#prescription-should-include"><span class="std std-ref">see documentation for more info</span></a>.</p>
</div>
<p>The following example shows all the configuration options that can be applied
for a step pipeline unit type. See respective sections described below for more
info. Also note, the example shows all the options that can be supplied and is
not semantically valid (not all options can be supplied at the same time):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StepUnit</span><span class="w"></span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step</span><span class="w"></span>
<span class="nt">should_include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># See should_include section for more info.</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w">                                            </span><span class="c1"># Criteria to trigger run of this pipeline unit.</span><span class="w"></span>
<span class="w">  </span><span class="nt">package_version</span><span class="p">:</span><span class="w">                                </span><span class="c1"># Matching criteria for a package that is about to be included to the resolver&#39;s state.</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flask</span><span class="w">                                   </span><span class="c1"># Optional name of the package for which the unit should be registered. If name is not provided, the unit is run for any package matching also other directives.</span><span class="w"></span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&gt;1.0,&lt;=1.1.0&#39;</span><span class="w">                       </span><span class="c1"># Version specifier for which the unit should be run. If not provided, defaults to any version.</span><span class="w"></span>
<span class="w">    </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://pypi.org/simple&#39;</span><span class="w">          </span><span class="c1"># Package source index for which the unit should be run. If not provided, defaults to any index. Can be negated using &quot;not&quot;.</span><span class="w"></span>
<span class="w">    </span><span class="nt">develop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w">                                </span><span class="c1"># If specified, match development or not development dependencies.</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w">                                          </span><span class="c1"># Optional, resolver internal state to match for the given resolution step.</span><span class="w"></span>
<span class="w">    </span><span class="nt">resolved_dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">werkzeug</span><span class="w">                              </span><span class="c1"># Dependencies that have to be present in the resolved state. The semantics for each entry is same as for package_version directive.</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;==1.0.0&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://pypi.org/simple&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">develop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">run</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">score</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.42</span><span class="w">                                     </span><span class="c1"># Optional score assigned to the step performed in the resolution.</span><span class="w"></span>
<span class="w">  </span><span class="nt">justification</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello, Thoth!</span><span class="w"></span>
<span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://thoth-station.ninja&#39;</span><span class="w"></span>

<span class="w">  </span><span class="nt">not_acceptable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Bad package inclusion</span><span class="w">           </span><span class="c1"># Block including certain package during the resolution.</span><span class="w"></span>

<span class="w">  </span><span class="c1"># Configuration of prematurely terminating the resolution process.</span><span class="w"></span>
<span class="w">  </span><span class="nt">eager_stop_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Stop pipeline</span><span class="w"></span>

<span class="w">  </span><span class="nt">multi_package_resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w">                 </span><span class="c1"># Run this pipeline multiple times when matched mutliple times. Defaults to false if not provided.</span><span class="w"></span>

<span class="w">  </span><span class="nt">log</span><span class="p">:</span><span class="w">                                            </span><span class="c1"># Optional text printed to logs when the unit gets called.</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Some text printed to log on pipeline unit run</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WARNING</span><span class="w"></span>

<span class="w">  </span><span class="nt">stack_info</span><span class="p">:</span><span class="w">                                     </span><span class="c1"># Information printed to the recommended stack report.</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WARNING</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hello, world!</span><span class="w"></span>
<span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://thoth-station.ninja&#39;</span><span class="w">           </span><span class="c1"># A link to justifications or a link to a web page.</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a complete schema <a class="reference external" href="https://github.com/thoth-station/adviser/blob/master/thoth/adviser/prescription/v1/schema.py">check the schema.py file in adviser’s
implementation</a>.</p>
</div>
<section id="id1">
<h2>Step <code class="docutils literal notranslate"><span class="pre">match</span></code><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Match the given step performed in the resolution process. A step is described
by state stating required resolved dependencies so far and package that is
about to be resolved (added to the resolved dependencies listing):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">package_version</span></code> - package that is about to be resolved by adding it to
the resolver’s state</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - optional, name of the package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code> - optional, version in a form of version specifier</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_url</span></code> - optional, Python package index URL, can be negated using
<code class="docutils literal notranslate"><span class="pre">not</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">develop</span></code> - optional, if provided it additionally specifies if the
dependency should or should not be a development dependency</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">state</span></code> - internal resolver’s state with resolved dependencies</p></li>
</ul>
<p>A state that needs to be met to trigger the given step pipeline. The state
can state:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">resolved_dependencies</span></code> - optional listing of resolved dependencies:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - optional package name that has to be stated in the resolved
dependency listing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code> - optional package version in a form of version specifier that
has to be stated in the resolved dependency listing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_url</span></code> - optional package index from which the given package is
consumed, can be negated using <code class="docutils literal notranslate"><span class="pre">not</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">develop</span></code> - optional boolean stating whether the package is or is not in
the development dependency listing</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">package_version_from</span></code> where each entry describes packages that introduced
the matched package. Each entry can state directives as in
<code class="docutils literal notranslate"><span class="pre">package_version</span></code>. If multiple entries are stated, each entry has to
introduce matched <code class="docutils literal notranslate"><span class="pre">package_version</span></code> as a dependency.</p></li>
</ul>
<p>To run the given step, all the packages in the resolved dependency listing need
to be present in the resolved software stack. Also both <code class="docutils literal notranslate"><span class="pre">state</span></code> and
<code class="docutils literal notranslate"><span class="pre">package_version</span></code> need to be matched.</p>
<p>It is possible to provide a listing of matching criteria to run the given
pipeline unit multiple times - the run part will be reused for each <code class="docutils literal notranslate"><span class="pre">match</span></code>
entry stated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Example:</em></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Match when torch (not dev) in a 1.9.0 compatible release from PyPI is</span><span class="w"></span>
<span class="c1"># about to be included into resolver&#39;s state with torchvision==0.9.0 from PyPI.</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">torch</span><span class="w"></span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~=1.9.0&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://pypi.org/simple&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">develop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">resolved_dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">torchvision</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;==0.9.0&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://pypi.org/simple&quot;</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Match when torch in a 1.9.0 compatible release *not* from PyPI is about to</span><span class="w"></span>
<span class="c1"># be included into resolver&#39;s state with torchvision==0.9.0 *not* from PyPI.</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">torch</span><span class="w"></span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~=1.9.0&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">index_url</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">not</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://pypi.org/simple&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">resolved_dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">torchvision</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;==0.9.0&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">index_url</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">not</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://pypi.org/simple&quot;</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">match</span><span class="p">:</span><span class="w"></span>
<span class="c1"># Match when resolving tensorflow as a dependency of seldon and</span><span class="w"></span>
<span class="c1"># flask is already in the resolved dependency listing:</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tensorflow</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">resolved_dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flask</span><span class="w"></span>
<span class="w">    </span><span class="nt">package_version_from</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">seldon</span><span class="w"></span>
<span class="c1"># Or match when resolving tensorflow as a dependency of seldon and</span><span class="w"></span>
<span class="c1"># connexion is already in the resolved dependency listing:</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tensorflow</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">resolved_dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">connexion</span><span class="w"></span>
<span class="w">    </span><span class="nt">package_version_from</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">seldon</span><span class="w"></span>
</pre></div>
</div>
</div>
</section>
<section id="step-run-log">
<h2>Step <code class="docutils literal notranslate"><span class="pre">run.log</span></code><a class="headerlink" href="#step-run-log" title="Permalink to this headline">¶</a></h2>
<p>Print the given message to the resolution log if the pipeline unit is included and run.</p>
<p>See <a class="reference internal" href="boots.html#boot-run-log"><span class="std std-ref">boot’s log</span></a> that has shared semantics.</p>
</section>
<section id="step-run-stack-info">
<h2>Step <code class="docutils literal notranslate"><span class="pre">run.stack_info</span></code><a class="headerlink" href="#step-run-stack-info" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="boots.html#boot-stack-info"><span class="std std-ref">stack info</span></a> which semantics is shared with this unit.</p>
<p>Note the stack info is added only once even if the pipeline unit is
run multiple times during the resolution process.</p>
</section>
<section id="step-run-multi-package-resolution">
<h2>Step <code class="docutils literal notranslate"><span class="pre">run.multi_package_resolution</span></code><a class="headerlink" href="#step-run-multi-package-resolution" title="Permalink to this headline">¶</a></h2>
<p>A boolean stating whether the given unit should be run if criteria match multiple
times per resolution run. Defaults to false.</p>
<p>See <a class="reference internal" href="../steps.html#multi-package-resolution"><span class="std std-ref">multi package resolution flag in steps</span></a>.</p>
</section>
<section id="id2">
<h2>Step <code class="docutils literal notranslate"><span class="pre">run.justification</span></code><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Optional justification added to the resolved stack when the pipeline unit is
run. This justification is added only if no <code class="docutils literal notranslate"><span class="pre">not_acceptable</span></code> and no
<code class="docutils literal notranslate"><span class="pre">eager_stop_pipeline</span></code> are supplied - if the given step is a valid step in the
resolution process. See <a class="reference internal" href="../justifications.html#justification"><span class="std std-ref">Adding justifications to the recommended software</span></a> for more info on how to write
justifications and their semantics.</p>
<p>Each entry in the list is specified by three attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - any of <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARNING</span></code>, and <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> specifying severity of
the produced justification</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code> - a message in a free text form printed to users</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">link</span></code> - a link to a document describing more information in detail</p></li>
</ul>
<p>The link can be in a form of a valid HTTP or HTTPS URL or a string which
<a class="reference internal" href="../justifications.html#jl"><span class="std std-ref">references justifications</span></a> available at
<a class="reference external" href="https://thoth-station.ninja/justifications">thoth-station.ninja/justifications</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Example:</em></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StepUnit</span><span class="w"></span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step</span><span class="w"></span>
<span class="nt">should_include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">times</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">  </span><span class="nt">adviser_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://thoth-station.ninja/simple&#39;</span><span class="w"></span>
<span class="nt">run</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">score</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">+0.1</span><span class="w"></span>
<span class="w">  </span><span class="nt">justification</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Builds available on index thoth-station.ninja/simple take precedence</span><span class="w"></span>
<span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://thoth-station.ninja/&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
</section>
<section id="step-run-score">
<h2>Step <code class="docutils literal notranslate"><span class="pre">run.score</span></code><a class="headerlink" href="#step-run-score" title="Permalink to this headline">¶</a></h2>
<p>Optional score to penalize or prioritize resolving the given stack.
Score has to be from interval -1.0 to +1.0 inclusively. This score corresponds
to <a class="reference internal" href="../introduction.html#introduction"><span class="std std-ref">the reward signal</span></a>.</p>
</section>
<section id="step-run-not-acceptable">
<h2>Step <code class="docutils literal notranslate"><span class="pre">run.not_acceptable</span></code><a class="headerlink" href="#step-run-not-acceptable" title="Permalink to this headline">¶</a></h2>
<p>Make the given step not acceptable in the resolution process. This option is
suitable to avoiding resolution of certain combination of packages - resolver
will try to find another resolution path to satisfy requirements.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Example:</em></p>
<p>A pipeline unit that filters out any <code class="docutils literal notranslate"><span class="pre">tensorflow~=2.4.0</span></code> when
<code class="docutils literal notranslate"><span class="pre">numpy==1.19.1</span></code> is in already resolved dependencies.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StepUnit</span><span class="w"></span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step</span><span class="w"></span>
<span class="nt">should_include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">adviser_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">numpy</span><span class="w"></span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;==1.19.1&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://pypi.org/simple&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">resolved_dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tensorflow</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;~=2.4.0&#39;</span><span class="w"></span>
<span class="nt">run</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">multi_package_resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="nt">not_acceptable</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;NumPy==1.19.5</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">causing</span><span class="nv"> </span><span class="s">issues</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">TensorFlow</span><span class="nv"> </span><span class="s">2.4&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">stack_info</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WARNING</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;NumPy==1.19.5</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">causing</span><span class="nv"> </span><span class="s">issues</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">TensorFlow</span><span class="nv"> </span><span class="s">2.4&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://thoth-station.ninja/j/tf_24_np.html&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
</section>
<section id="step-run-eager-stop-pipeline">
<h2>Step <code class="docutils literal notranslate"><span class="pre">run.eager_stop_pipeline</span></code><a class="headerlink" href="#step-run-eager-stop-pipeline" title="Permalink to this headline">¶</a></h2>
<p>If the given pipeline unit is registered and matched, it will cause the whole
resolution process to halt and report back results computed, if any. If no results
are available, the resolution process will fail as no software stack is produced.</p>
</section>
</section>
<section id="group-step-prescription-pipeline-unit">
<h1>Group step prescription pipeline unit<a class="headerlink" href="#group-step-prescription-pipeline-unit" title="Permalink to this headline">¶</a></h1>
<p>A group step prescribes a step unit in the resolution process that can match based on
dependencies that would be present in the resolved software stack together. Unlike step,
group step is agnostic to order in which dependencies are resolved in the resolution process.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TensorFlow26Keras27Sieve</span><span class="w"></span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step.Group</span><span class="w"></span>
<span class="nt">should_include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">adviser_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="c1"># See should_include section for more options.</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w"></span>
<span class="c1"># Run this prescription if keras&gt;=2.7.0 is resolved together with tensorflow&gt;2.6.0,&lt;2.7.0</span><span class="w"></span>
<span class="c1">#   OR</span><span class="w"></span>
<span class="c1"># if keras&gt;=2.7.0 is resolved together with tensorflow-cpu&gt;2.6.0,&lt;2.7.0</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keras</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;=2.7.0&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tensorflow</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;=2.6.0,&lt;2.7.0&quot;</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keras</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;=2.7.0&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tensorflow-cpu</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;=2.6.0,&lt;2.7.0&quot;</span><span class="w"></span>
<span class="nt">run</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">stack_info</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WARNING</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span><span class="w"></span>
<span class="w">      </span><span class="no">TensorFlow in versions &gt;=2.6.0,&lt;2.7.0 overpinned Keras dependency, compatible releases are ~=2.7.0</span><span class="w"></span>
<span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/tensorflow/tensorflow/issues/52922</span><span class="w"></span>
<span class="w">  </span><span class="nt">not_acceptable</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span><span class="w"></span>
<span class="w">    </span><span class="no">TensorFlow in versions &gt;=2.6.0,&lt;2.7.0 overpinned Keras dependency, compatible releases are ~=2.7.0</span><span class="w"></span>
</pre></div>
</div>
<section id="groupstep-match-group-package-version">
<h2>GroupStep <code class="docutils literal notranslate"><span class="pre">match.group[*].package_version</span></code><a class="headerlink" href="#groupstep-match-group-package-version" title="Permalink to this headline">¶</a></h2>
<p>Each entry in match’ <code class="docutils literal notranslate"><span class="pre">group</span></code> requires two or more Python packages that need be present together
in the resolution process. Each <code class="docutils literal notranslate"><span class="pre">package_version</span></code> is specified using:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - required, name of the package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code> - optional, version in a form of version specifier</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_url</span></code> - optional, Python package index URL, can be negated using <code class="docutils literal notranslate"><span class="pre">not</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">develop</span></code> - optional, if provided it additionally specifies if the
dependency should or should not be a development dependency</p></li>
</ul>
</section>
<section id="groupstep-run">
<h2>GroupStep <code class="docutils literal notranslate"><span class="pre">run</span></code><a class="headerlink" href="#groupstep-run" title="Permalink to this headline">¶</a></h2>
<p>Group step’s <code class="docutils literal notranslate"><span class="pre">run</span></code> entry can specify the following directives:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stack_info</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">not_acceptable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">score</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">justification</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eager_stop_pipeline</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code></p></li>
</ul>
<p>The logic is shared with <a class="reference internal" href="#prescription-steps"><span class="std std-ref">step</span></a>. Mind missing <code class="docutils literal notranslate"><span class="pre">multi_package_resolution</span></code>
which configuration is implicit for this prescription.</p>
</section>
</section>
<section id="skippackage-step-prescription-pipeline-unit">
<h1>SkipPackage step prescription pipeline unit<a class="headerlink" href="#skippackage-step-prescription-pipeline-unit" title="Permalink to this headline">¶</a></h1>
<p>This pipeline unit skips including the given package in the resolved stack
considering also state of the resolver. If the state is not relevant for
skipping the matched package, use <a class="reference internal" href="sieves.html#skip-package-sieve"><span class="std std-ref">SkipPackage sieve</span></a>
instead.</p>
<p>Running this pipeline unit will make sure that the matched <code class="docutils literal notranslate"><span class="pre">package_version</span></code>
and all its dependencies will be removed from the dependency graph. In other
words, sub-graph introduced by the matched <code class="docutils literal notranslate"><span class="pre">package_version</span></code> will be
completely removed.</p>
<p>The pipeline unit considers what packages introduced the package that is
supposed to be removed and optionally other packages that are already present
in the resolved dependencies listing. Use this unit if you wish to exclude
accidentally included dependencies.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Example:</em></p>
<p>A pipeline unit that removes SciPy package from the stack if SciPy was introduced
by the given TensorFlow version.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SkipPackageStepUnit</span><span class="w"></span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step.SkipPackage</span><span class="w"></span>
<span class="nt">should_include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">adviser_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scipy</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">package_version_from</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tensorflow</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&gt;=2.1,&lt;=2.3&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://pypi.org/simple</span><span class="w"></span>
<span class="w">      </span><span class="nt">develop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">run</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">stack_info</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WARNING</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TensorFlow in versions &gt;=2.1&lt;=2.3 stated SciPy as a dependency but it is not used in the codebase</span><span class="w"></span>
<span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://github.com/tensorflow/tensorflow/issues/35709&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>The described pipeline unit shares most of the directives with the step prescription pipeline unit.
However, it does not allow declaring:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">run.not_acceptable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run.score</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run.justification</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run.eager_stop_pipeline</span></code></p></li>
</ul>
</section>
<section id="addpackage-step-prescription-pipeline-unit">
<h1>AddPackage step prescription pipeline unit<a class="headerlink" href="#addpackage-step-prescription-pipeline-unit" title="Permalink to this headline">¶</a></h1>
<p>This pipeline unit allows adding packages to the dependency graph even though they were not stated in requirements.
The unit is suitable for fixing underpinning issues.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Example:</em></p>
<p>A pipeline unit that adds pandas package to the stack if SciPy was introduced
by the given TensorFlow version and Matplotlib is already resolved.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AddPackageStepUnit</span><span class="w"></span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">step.AddPackage</span><span class="w"></span>
<span class="nt">should_include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">adviser_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="c1"># See should_include section for more options.</span><span class="w"></span>
<span class="nt">match</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scipy</span><span class="w"></span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;~1.7.1&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://pypi.org/simple&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">state</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">package_version_from</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tensorflow</span><span class="w"></span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&gt;=2.1,&lt;=2.3&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://pypi.org/simple</span><span class="w"></span>
<span class="w">      </span><span class="nt">develop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">    </span><span class="nt">resolved_dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">matplotlib</span><span class="w"></span>
<span class="nt">run</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">stack_info</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Injecting Pandas to the dependency graph</span><span class="w"></span>
<span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://thoth-station.ninja&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">log</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span><span class="w"></span>
<span class="w">    </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Injecting Pandas to the dependency graph</span><span class="w"></span>
<span class="w">  </span><span class="nt">package_version</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pandas</span><span class="w"></span>
<span class="w">    </span><span class="nt">locked_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">==1.3.2</span><span class="w"></span>
<span class="w">    </span><span class="nt">index_url</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://pypi.org/simple&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">develop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
</pre></div>
</div>
</div>
<section id="addpackagestep-match">
<h2>AddPackageStep <code class="docutils literal notranslate"><span class="pre">match</span></code><a class="headerlink" href="#addpackagestep-match" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="#step-match"><span class="std std-ref">Step match</span></a> that has shared semantics.</p>
</section>
<section id="addpackagestep-run-stack-info">
<h2>AddPackageStep <code class="docutils literal notranslate"><span class="pre">run.stack_info</span></code><a class="headerlink" href="#addpackagestep-run-stack-info" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="boots.html#boot-stack-info"><span class="std std-ref">boot’s stack info</span></a> which semantics is shared with this unit.</p>
<p>Note the stack info is added only once even if the pipeline unit is
run multiple times during the resolution process.</p>
</section>
<section id="addpackagestep-run-log">
<h2>AddPackageStep <code class="docutils literal notranslate"><span class="pre">run.log</span></code><a class="headerlink" href="#addpackagestep-run-log" title="Permalink to this headline">¶</a></h2>
<p>Print the given message to the resolution log if the pipeline unit is included and run.</p>
<p>See <a class="reference internal" href="boots.html#boot-run-log"><span class="std std-ref">boot’s log</span></a> that has shared semantics.</p>
</section>
<section id="addpackagestep-run-package-version">
<h2>AddPackageStep <code class="docutils literal notranslate"><span class="pre">run.package_version</span></code><a class="headerlink" href="#addpackagestep-run-package-version" title="Permalink to this headline">¶</a></h2>
<p>Specification of a package that should be added to the dependency graph. All the fields are mandatory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - name of the package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">locked_version</span></code> - locked package version (must start with <code class="docutils literal notranslate"><span class="pre">==</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_url</span></code> - Python package index URL from where the package is supposed to be installed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">develop</span></code> - add the given package to default or development dependencies of the project</p></li>
</ul>
<p>Note the given package in the specified version has to be already analyzed by
the system so that resolver can inject this dependency and possibly all its
dependencies into the dependency graph. The Python package index has to be also
know and enabled on the deployment side. If these conditions are not met, the
pipeline unit will not register the requested package to the dependency graph.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Step prescription pipeline unit</a><ul>
<li><a class="reference internal" href="#id1">Step <code class="docutils literal notranslate"><span class="pre">match</span></code></a></li>
<li><a class="reference internal" href="#step-run-log">Step <code class="docutils literal notranslate"><span class="pre">run.log</span></code></a></li>
<li><a class="reference internal" href="#step-run-stack-info">Step <code class="docutils literal notranslate"><span class="pre">run.stack_info</span></code></a></li>
<li><a class="reference internal" href="#step-run-multi-package-resolution">Step <code class="docutils literal notranslate"><span class="pre">run.multi_package_resolution</span></code></a></li>
<li><a class="reference internal" href="#id2">Step <code class="docutils literal notranslate"><span class="pre">run.justification</span></code></a></li>
<li><a class="reference internal" href="#step-run-score">Step <code class="docutils literal notranslate"><span class="pre">run.score</span></code></a></li>
<li><a class="reference internal" href="#step-run-not-acceptable">Step <code class="docutils literal notranslate"><span class="pre">run.not_acceptable</span></code></a></li>
<li><a class="reference internal" href="#step-run-eager-stop-pipeline">Step <code class="docutils literal notranslate"><span class="pre">run.eager_stop_pipeline</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#group-step-prescription-pipeline-unit">Group step prescription pipeline unit</a><ul>
<li><a class="reference internal" href="#groupstep-match-group-package-version">GroupStep <code class="docutils literal notranslate"><span class="pre">match.group[*].package_version</span></code></a></li>
<li><a class="reference internal" href="#groupstep-run">GroupStep <code class="docutils literal notranslate"><span class="pre">run</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#skippackage-step-prescription-pipeline-unit">SkipPackage step prescription pipeline unit</a></li>
<li><a class="reference internal" href="#addpackage-step-prescription-pipeline-unit">AddPackage step prescription pipeline unit</a><ul>
<li><a class="reference internal" href="#addpackagestep-match">AddPackageStep <code class="docutils literal notranslate"><span class="pre">match</span></code></a></li>
<li><a class="reference internal" href="#addpackagestep-run-stack-info">AddPackageStep <code class="docutils literal notranslate"><span class="pre">run.stack_info</span></code></a></li>
<li><a class="reference internal" href="#addpackagestep-run-log">AddPackageStep <code class="docutils literal notranslate"><span class="pre">run.log</span></code></a></li>
<li><a class="reference internal" href="#addpackagestep-run-package-version">AddPackageStep <code class="docutils literal notranslate"><span class="pre">run.package_version</span></code></a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation index</a><ul>
      <li>Previous: <a href="sieves.html" title="previous chapter">Sieve prescription pipeline unit</a></li>
      <li>Next: <a href="strides.html" title="next chapter">Stride prescription pipeline unit</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../sources/prescription/steps.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

  
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>

  </body>
</html>